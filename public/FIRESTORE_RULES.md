# Настройка правил безопасности Firestore

## Проблема "Missing or insufficient permissions"

Если вы видите ошибку "Missing or insufficient permissions" в консоли браузера или баннер с предупреждением о проблемах доступа к базе данных, это означает, что у вашего приложения нет необходимых прав для чтения или записи данных в Firestore.

## Решение проблемы

Для решения этой проблемы необходимо настроить правила безопасности Firestore в консоли Firebase. Следуйте инструкциям ниже:

### 1. Откройте консоль Firebase

Перейдите по ссылке [https://console.firebase.google.com/](https://console.firebase.google.com/) и войдите в свой аккаунт.

### 2. Выберите проект

Выберите проект "bank-mannru2" из списка проектов.

### 3. Перейдите к настройкам Firestore

В левом меню выберите "Firestore Database".

### 4. Перейдите к правилам безопасности

Перейдите на вкладку "Rules" (Правила).

### 5. Замените правила безопасности

Замените текущие правила безопасности следующими упрощенными правилами:

```
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    // Разрешаем доступ ко всем данным для аутентифицированных пользователей
    match /{document=**} {
      allow read, write: if request.auth != null;
    }
    
    // Разрешаем доступ к настройкам alpha всем пользователям (даже неаутентифицированным)
    match /settings/alpha {
      allow read: if true;
    }
  }
}
```

Эти правила разрешают:
- Любому аутентифицированному пользователю читать и изменять любые данные в базе данных
- Всем пользователям (даже неаутентифицированным) читать настройки alpha

### 6. Опубликуйте правила

Нажмите кнопку "Publish" (Опубликовать) для применения новых правил безопасности.

### 7. Перезагрузите приложение

После публикации правил перезагрузите страницу приложения. Ошибки доступа должны исчезнуть, и приложение должно начать работать корректно.

## Примечание по безопасности

Обратите внимание, что эти упрощенные правила предоставляют широкий доступ к данным и подходят для разработки и тестирования. Для производственной среды рекомендуется использовать более детальные правила, ограничивающие доступ к данным в соответствии с бизнес-логикой приложения.

## Временное решение

До тех пор, пока вы не настроите правила безопасности, приложение будет работать в режиме ограниченной функциональности с тестовыми данными. Это позволит вам продолжить использование приложения, но некоторые функции могут быть недоступны или работать некорректно.

## Дополнительная информация

Если у вас возникли проблемы с настройкой правил безопасности или вы хотите узнать больше о правилах безопасности Firestore, обратитесь к [официальной документации Firebase](https://firebase.google.com/docs/firestore/security/get-started). 